import{u as _e,a as ke,r as C,j as Ce,N as Te,c as z,o as u,d as y,e as t,f as s,w as g,m as X,I as Ee,J as R,F as W,p as Z,l as D,h as w,t as B,E as c,O as Ie,P as $e,Q as Se,G as K,R as ze,S as Ve,L as Ae,M as Le,v as De,i as Ue}from"./index-8980bb29.js";import{h as Re}from"./html2canvas.esm-85f1a6b6.js";import{_ as Me}from"./_plugin-vue_export-helper-c27b6911.js";const Pe={class:"dashboard-container"},Fe={class:"dashboard-card",style:{padding:"20px","margin-bottom":"20px"}},Ne={style:{display:"flex","justify-content":"space-between","align-items":"center"}},je={class:"back-icon"},Oe={class:"two-column-layout",style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"20px"}},Be={class:"dashboard-card left-column",style:{padding:"30px"}},Ge={class:"form-section"},He={class:"form-section"},Ye={key:2,style:{margin:"0",color:"#666"},class:"mobile-text-sm"},We={key:3,style:{margin:"0",color:"#667eea"},class:"mobile-text-sm"},Ke={key:0,class:"image-preview"},qe=["src","alt"],Je=["onClick"],Qe={class:"form-section"},Xe={class:"form-section"},Ze={style:{"margin-top":"30px"}},et={class:"button-content"},tt={class:"button-icon"},ot={class:"button-text"},lt={class:"main-text"},at={class:"sub-text"},nt={class:"dashboard-card right-column result-panel"},st={class:"result-header"},it={key:0,class:"result-actions"},rt={class:"result-body"},dt={key:0,class:"empty-state"},ct={key:1,class:"loading-state"},ut={key:2,class:"generate-result"},pt={key:0,class:"result-title"},mt=["innerHTML"],gt={class:"image-preview-container"},vt=["src"],ft={class:"save-tips"},yt={class:"tip-text"},xt={class:"tip-title"},ht={key:0,class:"tip-desc"},wt={key:1,class:"wechat-tips"},bt={__name:"TravelNoteGenerator",setup(_t){const ae=_e(),V=ke(),G=C(!1),_=C([]),E=C(!1),T=C(""),H=C(""),ee=C(),A=C(!1),P=C(!1),te=C(),F=C(!1),N=C(""),n=C({model:"gemini-2.0-flash",writingStyle:"å°çº¢ä¹¦çˆ†æ¬¾é£",customStyle:"",location:"",date:"",companions:"",specialExp:"",emotionKeywords:"",otherInfo:""}),ne=[{label:"æ¨¡å‹1",value:"gemini-2.0-flash"},{label:"æ¨¡å‹2",value:"gemini-2.5-flash"},{label:"æ¨¡å‹3",value:"gpt-4o-mini"},{label:"æ¨¡å‹4",value:"qwen2.5-vl-32b-instruct"},{label:"æ¨¡å‹5",value:"hunyuan-turbo-vision"}],se=[{label:"å°çº¢ä¹¦çˆ†æ¬¾é£",value:"å°çº¢ä¹¦çˆ†æ¬¾é£"},{label:"é²è¿…å†·å³»é£",value:"é²è¿…å†·å³»é£"},{label:"çŸ¥ä¹ä½“ç¡¬æ ¸é£",value:"çŸ¥ä¹ä½“ç¡¬æ ¸é£"},{label:"æ–‡è‰ºæ¸…æ–°é£",value:"æ–‡è‰ºæ¸…æ–°é£"},{label:"å¹½é»˜é£è¶£é£",value:"å¹½é»˜é£è¶£é£"},{label:"äººæ–‡è€ƒæ®é£",value:"äººæ–‡è€ƒæ®é£"},{label:"æ„Ÿå®˜æ²‰æµ¸é£",value:"æ„Ÿå®˜æ²‰æµ¸é£"},{label:"æç®€ä¸»ä¹‰é£",value:"æç®€ä¸»ä¹‰é£"},{label:"è‡ªå®šä¹‰",value:"è‡ªå®šä¹‰"}],ie=Ce(()=>{if(!T.value)return"";let o=T.value;return o=o.replace(/\[å›¾(\d+)\]/g,(e,l)=>{const i=parseInt(l)-1;return i>=0&&i<_.value.length?`<img src="${_.value[i].preview}" alt="å›¾ç‰‡${l}" style="max-width: min(600px, 100%); height: auto; border-radius: 8px; margin: 16px 0; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); display: block;" />`:e}),o}),re=()=>{var o;A.value||(o=ee.value)==null||o.click()},de=o=>{const e=Array.from(o.target.files);oe(e)},ce=o=>{if(o.preventDefault(),G.value=!1,A.value)return;const e=Array.from(o.dataTransfer.files);oe(e)},oe=async o=>{const e=o.filter(l=>l.type.startsWith("image/"));if(_.value.length+e.length>9){c.warning("æœ€å¤šåªèƒ½ä¸Šä¼ 9å¼ å›¾ç‰‡");return}if(e.length===0){c.warning("è¯·é€‰æ‹©æœ‰æ•ˆçš„å›¾ç‰‡æ–‡ä»¶");return}A.value=!0,c.info(`æ­£åœ¨å‹ç¼© ${e.length} å¼ å›¾ç‰‡ï¼Œè¯·ç¨å€™...`);try{for(const l of e)try{const i=await ue(l),v=new FileReader;v.onload=r=>{_.value.push({file:i,preview:r.target.result,name:l.name,originalSize:l.size,compressedSize:i.size})},v.readAsDataURL(i)}catch(i){console.error("å›¾ç‰‡å‹ç¼©å¤±è´¥:",i),c.error(`å›¾ç‰‡ ${l.name} å‹ç¼©å¤±è´¥: ${i.message}`)}c.success(`æˆåŠŸå‹ç¼© ${e.length} å¼ å›¾ç‰‡`)}finally{A.value=!1}},ue=o=>new Promise((e,l)=>{const i=document.createElement("canvas"),v=i.getContext("2d"),r=new Image;r.onload=()=>{let{width:p,height:b}=r;const k=1920;p>b?p>k&&(b=b*k/p,p=k):b>k&&(p=p*k/b,b=k),i.width=p,i.height=b,v.drawImage(r,0,0,p,b);const $=I=>{i.toBlob(S=>{if(!S){l(new Error("å›¾ç‰‡å‹ç¼©å¤±è´¥"));return}if(S.size<=1024*1024||I<=.1){const L=new File([S],o.name,{type:S.type,lastModified:Date.now()});e(L)}else $(Math.max(.1,I-.1))},o.type==="image/png"?"image/jpeg":o.type,I)};$(.8)},r.onerror=()=>{l(new Error("å›¾ç‰‡åŠ è½½å¤±è´¥"))};const x=new FileReader;x.onload=p=>{r.src=p.target.result},x.onerror=()=>{l(new Error("æ–‡ä»¶è¯»å–å¤±è´¥"))},x.readAsDataURL(o)}),pe=o=>{_.value.splice(o,1)},me=async()=>{var e;if(_.value.length===0){c.warning("è¯·å…ˆä¸Šä¼ å›¾ç‰‡");return}const o=((e=V.user)==null?void 0:e.remaining_trials)||0;if(o<=0){c.error("ä½“éªŒæ¬¡æ•°å·²ç”¨å®Œï¼Œè¯·è”ç³»ç®¡ç†å‘˜");return}else o<=2&&c.warning(`æ‚¨è¿˜å‰©ä½™ ${o} æ¬¡ä½“éªŒæœºä¼š`);E.value=!0,T.value="",H.value="";try{const l=new FormData;_.value.forEach((r,x)=>{l.append("images",r.file)}),l.append("model_selection",n.value.model),l.append("location",n.value.location),l.append("date",n.value.date),l.append("companions",n.value.companions),l.append("special_exp",n.value.specialExp),l.append("emotion_keywords",n.value.emotionKeywords),l.append("other_info",n.value.otherInfo),l.append("writing_style",n.value.writingStyle),n.value.writingStyle==="è‡ªå®šä¹‰"&&l.append("custom_style_input",n.value.customStyle);const i=await fetch(Ie("/travel-notes/generate-test"),{method:"POST",headers:{Authorization:`Bearer ${V.token}`},body:l});if(!i.ok){if(i.status===401){const x=window.location.hash||window.location.pathname;localStorage.getItem("token")&&!x.includes("login")&&(localStorage.removeItem("token"),V.logout(),ae.push("/login"),c.error("ç™»å½•å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•"));return}if(i.status===403){try{const x=await i.json();c.error(x.detail||"ä½“éªŒæ¬¡æ•°å·²ç”¨å®Œï¼Œè¯·è”ç³»ç®¡ç†å‘˜")}catch{c.error("ä½“éªŒæ¬¡æ•°å·²ç”¨å®Œï¼Œè¯·è”ç³»ç®¡ç†å‘˜")}return}const r=await i.text();throw new Error(`ç”Ÿæˆå¤±è´¥: ${r}`)}const v=await i.json();if(v.content)T.value=v.content,H.value=v.title||"",console.log("æ¥æ”¶åˆ°å®Œæ•´å†…å®¹ï¼Œå·²ä¸€æ¬¡æ€§è®¾ç½®"),console.log("æ ‡é¢˜:",v.title);else throw new Error("æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ ¼å¼é”™è¯¯");await V.checkAuth(),setTimeout(()=>{const r=document.querySelector(".result-body");r&&(r.scrollTop=0)},100)}catch(l){console.error("ç”Ÿæˆæ¸¸è®°å¤±è´¥:",l),c.error("ç”Ÿæˆæ¸¸è®°å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{E.value=!1}},ge=()=>{E.value=!1,c.info("å·²å–æ¶ˆç”Ÿæˆ")},ve=async()=>{try{let o=T.value;o=o.replace(/\[å›¾\d+\]/g,""),o=o.replace(/<[^>]*>/g,""),o=o.trim(),await navigator.clipboard.writeText(o),c.success("æ–‡å­—å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{try{let e=T.value;e=e.replace(/\[å›¾\d+\]/g,""),e=e.replace(/<[^>]*>/g,""),e=e.trim();const l=document.createElement("textarea");l.value=e,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),c.success("æ–‡å­—å†…å®¹å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(e){console.error("å¤åˆ¶å¤±è´¥:",e),c.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©å¤åˆ¶")}}},fe=()=>/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768,f=()=>/micromessenger/i.test(navigator.userAgent),ye=()=>/Android/i.test(navigator.userAgent),xe=async()=>{if(!T.value||!te.value){c.warning("æ²¡æœ‰å¯åˆ†äº«çš„å†…å®¹");return}P.value=!0,c.info("æ­£åœ¨ç”Ÿæˆåˆ†äº«å›¾ç‰‡ï¼Œè¯·ç¨å€™...");try{const o=document.createElement("div"),e=f()?540:600,l=f()?20:30;o.style.cssText=`
      position: fixed;
      top: -9999px;
      left: -9999px;
      width: ${e}px;
      background: #fff;
      padding: ${l}px;
      padding-top: ${l+80}px;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #333;
    `;const i=document.createElement("div");i.style.cssText=`
      font-size: ${f()?"20px":"24px"};
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 16px;
      text-align: center;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    `,i.textContent="âœ¨ AIæ™ºèƒ½æ—…è¡Œæ¸¸è®°";const v=document.createElement("div");v.style.cssText=`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 14px;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 8px;
      margin-bottom: 16px;
      border-left: 4px solid #667eea;
      font-size: 12px;
      color: #495057;
    `;const r=document.createElement("div");r.style.cssText=`
      display: flex;
      align-items: center;
      gap: 6px;
    `;const x=document.createElement("div");x.style.cssText=`
      width: 20px;
      height: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 10px;
    `;const p=V.user,b=(p==null?void 0:p.username)||(p==null?void 0:p.email)||"æ—…è¡Œè€…";x.textContent=b.charAt(0).toUpperCase();const k=document.createElement("span");k.style.cssText=`
      font-weight: 600;
      color: #333;
      font-size: 12px;
    `,k.textContent=b,r.appendChild(x),r.appendChild(k);const $=document.createElement("div");if($.style.cssText=`
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 10px;
    `,n.value.location){const d=document.createElement("div");d.style.cssText=`
        display: flex;
        align-items: center;
        gap: 2px;
        padding: 3px 6px;
        background: rgba(102, 126, 234, 0.1);
        border-radius: 8px;
        color: #667eea;
        font-weight: 500;
        font-size: 10px;
      `,d.innerHTML=`ğŸ“ ${n.value.location}`,$.appendChild(d)}const I=document.createElement("div");I.style.cssText=`
      display: flex;
      align-items: center;
      gap: 2px;
      padding: 3px 6px;
      background: rgba(67, 233, 123, 0.1);
      border-radius: 8px;
      color: #43e97b;
      font-weight: 500;
      font-size: 10px;
    `;const S=n.value.date||new Date().toLocaleDateString("zh-CN");I.innerHTML=`ğŸ•’ ${he(S)}`,$.appendChild(I),v.appendChild(r),v.appendChild($);const L=document.createElement("div");L.style.cssText=`
      font-size: ${f()?"14px":"16px"};
      line-height: 1.6;
      margin-bottom: 16px;
      word-wrap: break-word;
      overflow-wrap: break-word;
    `;let a=T.value;a=a.replace(/\[å›¾(\d+)\]/g,(d,h)=>{const m=parseInt(h)-1;if(m>=0&&m<_.value.length){const M=_.value[m],Y=f()?"480px":"540px";return`<img src="${M.preview}" alt="å›¾ç‰‡${h}" style="width: 100%; max-width: ${Y}; height: auto; border-radius: 8px; margin: 12px 0; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); display: block;" />`}return d}),a=a.replace(/\n/g,"<br>"),L.innerHTML=a;const U=document.createElement("div");U.style.cssText=`
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid #f0f0f0;
      text-align: center;
      font-size: 12px;
      color: #999;
    `,U.innerHTML=`
      <div style="font-weight: 600; color: #667eea; margin-bottom: 4px;">ç”±AIæ™ºèƒ½ç”Ÿæˆ</div>
      <div style="font-size: 11px;">è®©æ¯ä¸€æ¬¡æ—…è¡Œéƒ½æœ‰ç²¾å½©çš„æ•…äº‹</div>
    `,o.appendChild(i),o.appendChild(v),o.appendChild(L),o.appendChild(U),document.body.appendChild(o);const q=o.querySelectorAll("img");console.log(`Found ${q.length} images in container`);const be=Array.from(q).map((d,h)=>new Promise(m=>{if(console.log(`Checking image ${h+1}:`,d.src.substring(0,50)+"..."),d.src.startsWith("data:"))if(d.complete&&d.naturalWidth>0)console.log(`Image ${h+1} already loaded (base64)`),m();else{const M=()=>{console.log(`Image ${h+1} loaded successfully`),m()},Y=()=>{console.warn(`Image ${h+1} failed to load`),m()};d.addEventListener("load",M,{once:!0}),d.addEventListener("error",Y,{once:!0}),setTimeout(()=>{d.removeEventListener("load",M),d.removeEventListener("error",Y),console.log(`Image ${h+1} load timeout, continuing...`),m()},5e3)}else d.complete?m():(d.onload=m,d.onerror=m)}));await Promise.all(be),console.log("All images processed");const j=o.scrollHeight;let J=f()?1.5:2,Q=f()?.8:.9;j>8e3?(J=f()?1.2:1.5,Q=f()?.7:.85,c.info("å†…å®¹è¾ƒé•¿ï¼Œæ­£åœ¨ä¼˜åŒ–å›¾ç‰‡è´¨é‡ä»¥ç¡®ä¿ç”ŸæˆæˆåŠŸ...")):j>5e3&&(J=f()?1.3:1.8,Q=f()?.75:.87);const le={useCORS:!0,allowTaint:!0,scale:J,backgroundColor:"#ffffff",logging:!0,width:e,height:j,scrollX:0,scrollY:0,windowWidth:e,windowHeight:j,foreignObjectRendering:!1,imageTimeout:15e3,onclone:d=>{console.log("Document cloned for html2canvas");const h=d.querySelectorAll("img");console.log(`Found ${h.length} images in cloned document`)}};console.log("html2canvas options:",le),console.log("Container dimensions:",{width:e,height:j}),await new Promise(d=>setTimeout(d,500));const O=await Re(o,le);if(console.log("Canvas generated:",{width:O.width,height:O.height}),O.width===0||O.height===0)throw new Error("ç”Ÿæˆçš„å›¾ç‰‡å°ºå¯¸ä¸º0ï¼Œå¯èƒ½å­˜åœ¨æ¸²æŸ“é—®é¢˜");document.body.removeChild(o),O.toBlob(d=>{if(d){const h=URL.createObjectURL(d);if(fe()&&(!f()||f()))if(f()){const m=new FileReader;m.onload=function(M){N.value=M.target.result,F.value=!0,c.success("å›¾ç‰‡å·²ç”Ÿæˆï¼Œè¯·é•¿æŒ‰å›¾ç‰‡ä¿å­˜åˆ°ç›¸å†Œæˆ–è½¬å‘ç»™æœ‹å‹")},m.readAsDataURL(d),URL.revokeObjectURL(h)}else N.value=h,F.value=!0,c.success("å›¾ç‰‡å·²ç”Ÿæˆï¼Œè¯·é•¿æŒ‰å›¾ç‰‡ä¿å­˜åˆ°ç›¸å†Œæˆ–è½¬å‘ç»™æœ‹å‹");else{const m=document.createElement("a");m.href=h,m.download=`æ—…è¡Œæ¸¸è®°_${n.value.location||"æœªçŸ¥åœ°ç‚¹"}_${new Date().toLocaleDateString()}.jpg`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(h),f()?c.success("å›¾ç‰‡å·²ä¸‹è½½åˆ°å¾®ä¿¡ä¸‹è½½æ–‡ä»¶å¤¹"):c.success("åˆ†äº«å›¾ç‰‡å·²ç”Ÿæˆå¹¶ä¸‹è½½")}}else throw new Error("å›¾ç‰‡ç”Ÿæˆå¤±è´¥")},"image/jpeg",Q)}catch(o){console.error("ç”Ÿæˆåˆ†äº«å›¾ç‰‡å¤±è´¥:",o),c.error("ç”Ÿæˆåˆ†äº«å›¾ç‰‡å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{P.value=!1}};Te(()=>{});function he(o){return new Date(o).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}function we(){return f()||ye(),"ä¿å­˜å›¾ç‰‡åˆ°ç›¸å†Œ"}return(o,e)=>{var I,S,L;const l=z("el-icon"),i=z("el-option"),v=z("el-select"),r=z("el-input"),x=z("el-col"),p=z("el-date-picker"),b=z("el-row"),k=z("el-button"),$=z("el-dialog");return u(),y(W,null,[t("div",Pe,[t("div",Fe,[t("div",Ne,[e[17]||(e[17]=t("div",{style:{flex:"1"}},[t("h1",{class:"gradient-text",style:{"font-size":"24px",margin:"0"}}," âœ¨ æ™ºèƒ½æ—…è¡Œæ¸¸è®°ç”Ÿæˆå™¨ "),t("p",{style:{margin:"8px 0 0 0",color:"#666"}}," ä¸Šä¼ æ‚¨çš„æ—…è¡Œç…§ç‰‡ï¼ŒAIå°†ä¸ºæ‚¨ç”Ÿæˆç²¾å½©çš„æ—…è¡Œæ¸¸è®° ")],-1)),t("div",{class:"back-button",onClick:e[0]||(e[0]=a=>o.$router.push("/dashboard"))},[t("div",je,[s(l,{size:"18"},{default:g(()=>[s(w($e))]),_:1})]),e[16]||(e[16]=t("span",{class:"back-text"},"è¿”å›é¦–é¡µ",-1))])])]),t("div",Oe,[t("div",Be,[e[24]||(e[24]=t("h2",{style:{margin:"0 0 20px 0",color:"#333"}},"åˆ›ä½œè®¾ç½®",-1)),t("div",Ge,[e[18]||(e[18]=t("div",{class:"section-title"},"é€‰æ‹©AIæ¨¡å‹",-1)),s(v,{modelValue:n.value.model,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value.model=a),placeholder:"è¯·é€‰æ‹©æ¨¡å‹",style:{width:"100%"}},{default:g(()=>[(u(),y(W,null,Z(ne,a=>s(i,{key:a.value,label:a.label,value:a.value,disabled:a.disabled},null,8,["label","value","disabled"])),64))]),_:1},8,["modelValue"])]),t("div",He,[e[20]||(e[20]=t("div",{class:"section-title"},"ä¸Šä¼ æ—…è¡Œç…§ç‰‡",-1)),t("div",{class:X(["upload-area",{dragover:G.value,compressing:A.value}]),onDrop:ce,onDragover:e[2]||(e[2]=Ee(a=>G.value=!0,["prevent"])),onDragleave:e[3]||(e[3]=a=>G.value=!1),onClick:e[4]||(e[4]=a=>!A.value&&re())},[A.value?(u(),R(l,{key:1,size:"48",style:{color:"#667eea","margin-bottom":"16px"},class:"rotating"},{default:g(()=>[s(w(K))]),_:1})):(u(),R(l,{key:0,size:"48",style:{color:"#999","margin-bottom":"16px"}},{default:g(()=>[s(w(Se))]),_:1})),A.value?(u(),y("p",We," æ­£åœ¨å‹ç¼©å›¾ç‰‡ï¼Œè¯·ç¨å€™... ")):(u(),y("p",Ye," ç‚¹å‡»æˆ–æ‹–æ‹½ä¸Šä¼ å›¾ç‰‡ ")),e[19]||(e[19]=t("p",{style:{margin:"8px 0 0 0","font-size":"12px",color:"#999"},class:"mobile-text-xs"}," æ”¯æŒ JPGã€PNGã€JPEG æ ¼å¼ï¼Œæœ€å¤šä¸Šä¼ 9å¼  ",-1))],34),t("input",{ref_key:"fileInput",ref:ee,type:"file",multiple:"",accept:"image/*",style:{display:"none"},onChange:de},null,544),_.value.length>0?(u(),y("div",Ke,[(u(!0),y(W,null,Z(_.value,(a,U)=>(u(),y("div",{key:U,class:"image-item"},[t("img",{src:a.preview,alt:`å›¾ç‰‡${U+1}`},null,8,qe),t("button",{class:"remove-btn",onClick:q=>pe(U)},"Ã—",8,Je)]))),128))])):D("",!0)]),t("div",Qe,[e[21]||(e[21]=t("div",{class:"section-title"},"å†™ä½œé£æ ¼",-1)),s(v,{modelValue:n.value.writingStyle,"onUpdate:modelValue":e[5]||(e[5]=a=>n.value.writingStyle=a),placeholder:"è¯·é€‰æ‹©å†™ä½œé£æ ¼",style:{width:"100%"}},{default:g(()=>[(u(),y(W,null,Z(se,a=>s(i,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),n.value.writingStyle==="è‡ªå®šä¹‰"?(u(),R(r,{key:0,modelValue:n.value.customStyle,"onUpdate:modelValue":e[6]||(e[6]=a=>n.value.customStyle=a),type:"textarea",rows:3,placeholder:"è¯·æè¿°æ‚¨æƒ³è¦çš„å†™ä½œé£æ ¼...",style:{"margin-top":"12px"}},null,8,["modelValue"])):D("",!0)]),t("div",Xe,[e[22]||(e[22]=t("div",{class:"section-title"},"æ—…è¡Œä¿¡æ¯",-1)),s(b,{gutter:12},{default:g(()=>[s(x,{xs:24,sm:12},{default:g(()=>[s(r,{modelValue:n.value.location,"onUpdate:modelValue":e[7]||(e[7]=a=>n.value.location=a),placeholder:"åœ°ç‚¹ï¼ˆå¦‚ï¼šæµ™æ±Ÿçœæ­å·å¸‚è¥¿æ¹–æ™¯åŒºï¼‰","prefix-icon":"Location"},null,8,["modelValue"])]),_:1}),s(x,{xs:24,sm:12},{default:g(()=>[s(p,{modelValue:n.value.date,"onUpdate:modelValue":e[8]||(e[8]=a=>n.value.date=a),type:"date",placeholder:"é€‰æ‹©æ—¥æœŸ",style:{width:"100%"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),s(r,{modelValue:n.value.companions,"onUpdate:modelValue":e[9]||(e[9]=a=>n.value.companions=a),placeholder:"åŒè¡Œè€…ï¼ˆå¦‚ï¼šå®¶äººã€æœ‹å‹ã€ç‹¬è¡Œï¼‰","prefix-icon":"User",style:{"margin-top":"12px"}},null,8,["modelValue"]),s(r,{modelValue:n.value.specialExp,"onUpdate:modelValue":e[10]||(e[10]=a=>n.value.specialExp=a),type:"textarea",rows:2,placeholder:"ç‰¹è‰²ä½“éªŒï¼ˆå¦‚ï¼šå“å°è¥¿æ¹–é†‹é±¼ã€æ¸¸èˆ¹ã€çœ‹æ—¥è½ï¼‰",style:{"margin-top":"12px"}},null,8,["modelValue"]),s(r,{modelValue:n.value.emotionKeywords,"onUpdate:modelValue":e[11]||(e[11]=a=>n.value.emotionKeywords=a),placeholder:"æƒ…æ„Ÿå…³é”®è¯ï¼ˆå¦‚ï¼šæ‚ é—²ã€æƒŠå–œã€æ¸©é¦¨ï¼‰","prefix-icon":"Star",style:{"margin-top":"12px"}},null,8,["modelValue"]),s(r,{modelValue:n.value.otherInfo,"onUpdate:modelValue":e[12]||(e[12]=a=>n.value.otherInfo=a),type:"textarea",rows:2,placeholder:"å…¶ä»–ä¿¡æ¯",style:{"margin-top":"12px"}},null,8,["modelValue"])]),t("div",Ze,[t("div",{class:X(["generate-button",{generating:E.value,disabled:_.value.length===0||(((I=w(V).user)==null?void 0:I.remaining_trials)||0)<=0}]),onClick:me},[t("div",et,[t("div",tt,[E.value?(u(),R(l,{key:1,size:"24",class:"rotating"},{default:g(()=>[s(w(K))]),_:1})):(u(),R(l,{key:0,size:"24"},{default:g(()=>[s(w(ze))]),_:1}))]),t("div",ot,[t("span",lt,B(E.value?"æ­£åœ¨ç”Ÿæˆä¸­...":(((S=w(V).user)==null?void 0:S.remaining_trials)||0)<=0?"ä½“éªŒæ¬¡æ•°å·²ç”¨å®Œ":"ç”Ÿæˆæ¸¸è®°"),1),t("span",at,B(E.value?"AIæ­£åœ¨ä¸ºæ‚¨åˆ›ä½œç²¾å½©æ¸¸è®°":(((L=w(V).user)==null?void 0:L.remaining_trials)||0)<=0?"è¯·è”ç³»ç®¡ç†å‘˜è·å–æ›´å¤šæ¬¡æ•°":"ç‚¹å‡»å¼€å§‹AIåˆ›ä½œä¹‹æ—…"),1)])])],2),E.value?(u(),y("div",{key:0,class:"cancel-button",onClick:ge},[s(l,{size:"16"},{default:g(()=>[s(w(Ve))]),_:1}),e[23]||(e[23]=t("span",null,"å–æ¶ˆç”Ÿæˆ",-1))])):D("",!0)])]),t("div",nt,[t("div",st,[e[26]||(e[26]=t("h2",{style:{margin:"0",color:"#333"}},"ç”Ÿæˆç»“æœ",-1)),T.value?(u(),y("div",it,[t("div",{class:"action-btn copy",onClick:ve},[s(l,{size:"16"},{default:g(()=>[s(w(Ae))]),_:1}),e[25]||(e[25]=t("span",null,"å¤åˆ¶æ–‡å­—",-1))]),t("div",{class:X(["action-btn share",{generating:P.value}]),onClick:xe},[P.value?(u(),R(l,{key:1,size:"16",class:"rotating"},{default:g(()=>[s(w(K))]),_:1})):(u(),R(l,{key:0,size:"16"},{default:g(()=>[s(w(Le))]),_:1})),t("span",null,B(P.value?"ç”Ÿæˆä¸­...":"åˆ†äº«å›¾ç‰‡"),1)],2)])):D("",!0)]),t("div",rt,[!T.value&&!E.value?(u(),y("div",dt,[s(l,{size:"64"},{default:g(()=>[s(w(De))]),_:1}),e[27]||(e[27]=t("p",{style:{margin:"20px 0 0 0","font-size":"16px"},class:"mobile-text-sm"}," ä¸Šä¼ å›¾ç‰‡å¹¶å¡«å†™ä¿¡æ¯åï¼Œç‚¹å‡»ç”ŸæˆæŒ‰é’®å¼€å§‹åˆ›ä½œ ",-1))])):D("",!0),E.value?(u(),y("div",ct,[s(l,{size:"64",class:"rotating"},{default:g(()=>[s(w(K))]),_:1}),e[28]||(e[28]=t("p",{style:{margin:"20px 0 0 0",color:"#666"},class:"mobile-text-sm"}," AIæ­£åœ¨ä¸ºæ‚¨åˆ›ä½œæ¸¸è®°ï¼Œè¯·ç¨å€™... ",-1))])):D("",!0),T.value?(u(),y("div",ut,[H.value?(u(),y("div",pt,[t("h2",null,B(H.value),1)])):D("",!0),t("div",{class:"result-content",innerHTML:ie.value,ref_key:"resultContentRef",ref:te},null,8,mt)])):D("",!0)])])])]),s($,{modelValue:F.value,"onUpdate:modelValue":e[14]||(e[14]=a=>F.value=a),title:"åˆ†äº«å›¾ç‰‡",width:"90%",class:"image-preview-dialog",onClose:e[15]||(e[15]=()=>{o.URL.revokeObjectURL(N.value),N.value=""})},{footer:g(()=>[s(k,{onClick:e[13]||(e[13]=a=>F.value=!1),type:"primary"},{default:g(()=>e[31]||(e[31]=[Ue("çŸ¥é“äº†")])),_:1,__:[31]})]),default:g(()=>[t("div",gt,[t("img",{src:N.value,alt:"åˆ†äº«å›¾ç‰‡",class:"preview-image"},null,8,vt),t("div",ft,[e[30]||(e[30]=t("div",{class:"tip-icon"},"ğŸ’¾",-1)),t("div",yt,[t("p",xt,B(we()),1),f()?(u(),y("div",wt,e[29]||(e[29]=[t("p",{class:"tip-desc"},"â€¢ é•¿æŒ‰å›¾ç‰‡ï¼Œä¿å­˜å›¾ç‰‡æˆ–è½¬å‘ç»™æœ‹å‹",-1)]))):(u(),y("p",ht,'åœ¨å›¾ç‰‡ä¸Šé•¿æŒ‰ï¼Œé€‰æ‹©"ä¿å­˜å›¾ç‰‡"æˆ–"å­˜å‚¨å›¾åƒ"'))])])])]),_:1},8,["modelValue"])],64)}}},Et=Me(bt,[["__scopeId","data-v-78f0e413"]]);export{Et as default};
