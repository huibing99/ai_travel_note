import{u as be,a as _e,r as E,j as ke,N as Ce,c as z,o as u,d as h,e as o,f as s,w as g,m as Q,I as Ee,J as U,F as H,p as X,l as R,h as w,t as Y,E as c,O as Ie,P as Te,Q as $e,G as W,R as Se,S as ze,L as Ve,M as Ae,v as Le,i as De}from"./index-210969f0.js";import{h as Ue}from"./html2canvas.esm-85f1a6b6.js";import{_ as Re}from"./_plugin-vue_export-helper-c27b6911.js";const Me={class:"dashboard-container"},Pe={class:"dashboard-card",style:{padding:"20px","margin-bottom":"20px"}},Fe={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Ne={class:"back-icon"},je={class:"two-column-layout",style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"20px"}},Oe={class:"dashboard-card left-column",style:{padding:"30px"}},Be={class:"form-section"},Ge={class:"form-section"},He={key:2,style:{margin:"0",color:"#666"},class:"mobile-text-sm"},Ye={key:3,style:{margin:"0",color:"#667eea"},class:"mobile-text-sm"},We={key:0,class:"image-preview"},Ke=["src","alt"],qe=["onClick"],Je={class:"form-section"},Qe={class:"form-section"},Xe={style:{"margin-top":"30px"}},Ze={class:"button-content"},et={class:"button-icon"},tt={class:"button-text"},ot={class:"main-text"},at={class:"sub-text"},lt={class:"dashboard-card right-column result-panel"},nt={class:"result-header"},st={key:0,class:"result-actions"},it={class:"result-body"},rt={key:0,class:"empty-state"},dt={key:1,class:"loading-state"},ct={key:2,class:"generate-result"},ut=["innerHTML"],pt={class:"image-preview-container"},mt=["src"],gt={class:"save-tips"},vt={class:"tip-text"},ft={class:"tip-title"},yt={key:0,class:"tip-desc"},xt={key:1,class:"wechat-tips"},ht={__name:"TravelNoteGenerator",setup(wt){const ae=be(),V=_e(),B=E(!1),_=E([]),I=E(!1),C=E(""),Z=E(),A=E(!1),P=E(!1),ee=E(),F=E(!1),N=E(""),n=E({model:"gemini-2.0-flash",writingStyle:"小红书爆款风",customStyle:"",location:"",date:"",companions:"",specialExp:"",emotionKeywords:"",otherInfo:""}),le=[{label:"模型1",value:"gemini-2.0-flash"},{label:"模型2",value:"gemini-2.5-flash"},{label:"模型3",value:"gpt-4o-mini"},{label:"模型4",value:"qwen2.5-vl-32b-instruct"},{label:"模型5",value:"hunyuan-turbo-vision"}],ne=[{label:"小红书爆款风",value:"小红书爆款风"},{label:"鲁迅冷峻风",value:"鲁迅冷峻风"},{label:"知乎体硬核风",value:"知乎体硬核风"},{label:"文艺清新风",value:"文艺清新风"},{label:"幽默风趣风",value:"幽默风趣风"},{label:"人文考据风",value:"人文考据风"},{label:"感官沉浸风",value:"感官沉浸风"},{label:"极简主义风",value:"极简主义风"},{label:"自定义",value:"自定义"}],se=ke(()=>{if(!C.value)return"";let t=C.value;return t=t.replace(/\[图(\d+)\]/g,(e,a)=>{const i=parseInt(a)-1;return i>=0&&i<_.value.length?`<img src="${_.value[i].preview}" alt="图片${a}" style="max-width: min(600px, 100%); height: auto; border-radius: 8px; margin: 16px 0; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); display: block;" />`:e}),t}),ie=()=>{var t;A.value||(t=Z.value)==null||t.click()},re=t=>{const e=Array.from(t.target.files);te(e)},de=t=>{if(t.preventDefault(),B.value=!1,A.value)return;const e=Array.from(t.dataTransfer.files);te(e)},te=async t=>{const e=t.filter(a=>a.type.startsWith("image/"));if(_.value.length+e.length>9){c.warning("最多只能上传9张图片");return}if(e.length===0){c.warning("请选择有效的图片文件");return}A.value=!0,c.info(`正在压缩 ${e.length} 张图片，请稍候...`);try{for(const a of e)try{const i=await ce(a),f=new FileReader;f.onload=r=>{_.value.push({file:i,preview:r.target.result,name:a.name,originalSize:a.size,compressedSize:i.size})},f.readAsDataURL(i)}catch(i){console.error("图片压缩失败:",i),c.error(`图片 ${a.name} 压缩失败: ${i.message}`)}c.success(`成功压缩 ${e.length} 张图片`)}finally{A.value=!1}},ce=t=>new Promise((e,a)=>{const i=document.createElement("canvas"),f=i.getContext("2d"),r=new Image;r.onload=()=>{let{width:p,height:b}=r;const k=1920;p>b?p>k&&(b=b*k/p,p=k):b>k&&(p=p*k/b,b=k),i.width=p,i.height=b,f.drawImage(r,0,0,p,b);const $=T=>{i.toBlob(S=>{if(!S){a(new Error("图片压缩失败"));return}if(S.size<=1024*1024||T<=.1){const L=new File([S],t.name,{type:S.type,lastModified:Date.now()});e(L)}else $(Math.max(.1,T-.1))},t.type==="image/png"?"image/jpeg":t.type,T)};$(.8)},r.onerror=()=>{a(new Error("图片加载失败"))};const y=new FileReader;y.onload=p=>{r.src=p.target.result},y.onerror=()=>{a(new Error("文件读取失败"))},y.readAsDataURL(t)}),ue=t=>{_.value.splice(t,1)},pe=async()=>{var e;if(_.value.length===0){c.warning("请先上传图片");return}const t=((e=V.user)==null?void 0:e.remaining_trials)||0;if(t<=0){c.error("体验次数已用完，请联系管理员");return}else t<=2&&c.warning(`您还剩余 ${t} 次体验机会`);I.value=!0,C.value="";try{const a=new FormData;_.value.forEach((r,y)=>{a.append("images",r.file)}),a.append("model_selection",n.value.model),a.append("location",n.value.location),a.append("date",n.value.date),a.append("companions",n.value.companions),a.append("special_exp",n.value.specialExp),a.append("emotion_keywords",n.value.emotionKeywords),a.append("other_info",n.value.otherInfo),a.append("writing_style",n.value.writingStyle),n.value.writingStyle==="自定义"&&a.append("custom_style_input",n.value.customStyle);const i=await fetch(Ie("/travel-notes/generate-test"),{method:"POST",headers:{Authorization:`Bearer ${V.token}`},body:a});if(!i.ok){if(i.status===401){const y=window.location.hash||window.location.pathname;localStorage.getItem("token")&&!y.includes("login")&&(localStorage.removeItem("token"),V.logout(),ae.push("/login"),c.error("登录已过期，请重新登录"));return}if(i.status===403){try{const y=await i.json();c.error(y.detail||"体验次数已用完，请联系管理员")}catch{c.error("体验次数已用完，请联系管理员")}return}const r=await i.text();throw new Error(`生成失败: ${r}`)}const f=await i.json();if(f.content)C.value=f.content,console.log("接收到完整内容，已一次性设置");else throw new Error("服务器返回的数据格式错误");await V.checkAuth(),setTimeout(()=>{const r=document.querySelector(".result-body");r&&(r.scrollTop=0)},100)}catch(a){console.error("生成游记失败:",a),c.error("生成游记失败，请重试")}finally{I.value=!1}},me=()=>{I.value=!1,c.info("已取消生成")},ge=async()=>{try{let t=C.value;t=t.replace(/\[图\d+\]/g,""),t=t.replace(/<[^>]*>/g,""),t=t.trim(),await navigator.clipboard.writeText(t),c.success("文字内容已复制到剪贴板")}catch{try{let e=C.value;e=e.replace(/\[图\d+\]/g,""),e=e.replace(/<[^>]*>/g,""),e=e.trim();const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),c.success("文字内容已复制到剪贴板")}catch(e){console.error("复制失败:",e),c.error("复制失败，请手动选择复制")}}},ve=()=>/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768,v=()=>/micromessenger/i.test(navigator.userAgent),fe=()=>/Android/i.test(navigator.userAgent),ye=async()=>{if(!C.value||!ee.value){c.warning("没有可分享的内容");return}P.value=!0,c.info("正在生成分享图片，请稍候...");try{const t=document.createElement("div"),e=v()?540:600,a=v()?20:30;t.style.cssText=`
      position: fixed;
      top: -9999px;
      left: -9999px;
      width: ${e}px;
      background: #fff;
      padding: ${a}px;
      padding-top: ${a+80}px;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #333;
    `;const i=document.createElement("div");i.style.cssText=`
      font-size: ${v()?"20px":"24px"};
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 16px;
      text-align: center;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    `,i.textContent="✨ AI智能旅行游记";const f=document.createElement("div");f.style.cssText=`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 14px;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      border-radius: 8px;
      margin-bottom: 16px;
      border-left: 4px solid #667eea;
      font-size: 12px;
      color: #495057;
    `;const r=document.createElement("div");r.style.cssText=`
      display: flex;
      align-items: center;
      gap: 6px;
    `;const y=document.createElement("div");y.style.cssText=`
      width: 20px;
      height: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 10px;
    `;const p=V.user,b=(p==null?void 0:p.username)||(p==null?void 0:p.email)||"旅行者";y.textContent=b.charAt(0).toUpperCase();const k=document.createElement("span");k.style.cssText=`
      font-weight: 600;
      color: #333;
      font-size: 12px;
    `,k.textContent=b,r.appendChild(y),r.appendChild(k);const $=document.createElement("div");if($.style.cssText=`
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 10px;
    `,n.value.location){const d=document.createElement("div");d.style.cssText=`
        display: flex;
        align-items: center;
        gap: 2px;
        padding: 3px 6px;
        background: rgba(102, 126, 234, 0.1);
        border-radius: 8px;
        color: #667eea;
        font-weight: 500;
        font-size: 10px;
      `,d.innerHTML=`📍 ${n.value.location}`,$.appendChild(d)}const T=document.createElement("div");T.style.cssText=`
      display: flex;
      align-items: center;
      gap: 2px;
      padding: 3px 6px;
      background: rgba(67, 233, 123, 0.1);
      border-radius: 8px;
      color: #43e97b;
      font-weight: 500;
      font-size: 10px;
    `;const S=n.value.date||new Date().toLocaleDateString("zh-CN");T.innerHTML=`🕒 ${xe(S)}`,$.appendChild(T),f.appendChild(r),f.appendChild($);const L=document.createElement("div");L.style.cssText=`
      font-size: ${v()?"14px":"16px"};
      line-height: 1.6;
      margin-bottom: 16px;
      word-wrap: break-word;
      overflow-wrap: break-word;
    `;let l=C.value;l=l.replace(/\[图(\d+)\]/g,(d,x)=>{const m=parseInt(x)-1;if(m>=0&&m<_.value.length){const M=_.value[m],G=v()?"480px":"540px";return`<img src="${M.preview}" alt="图片${x}" style="width: 100%; max-width: ${G}; height: auto; border-radius: 8px; margin: 12px 0; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); display: block;" />`}return d}),l=l.replace(/\n/g,"<br>"),L.innerHTML=l;const D=document.createElement("div");D.style.cssText=`
      margin-top: 20px;
      padding-top: 16px;
      border-top: 1px solid #f0f0f0;
      text-align: center;
      font-size: 12px;
      color: #999;
    `,D.innerHTML=`
      <div style="font-weight: 600; color: #667eea; margin-bottom: 4px;">由AI智能生成</div>
      <div style="font-size: 11px;">让每一次旅行都有精彩的故事</div>
    `,t.appendChild(i),t.appendChild(f),t.appendChild(L),t.appendChild(D),document.body.appendChild(t);const K=t.querySelectorAll("img");console.log(`Found ${K.length} images in container`);const we=Array.from(K).map((d,x)=>new Promise(m=>{if(console.log(`Checking image ${x+1}:`,d.src.substring(0,50)+"..."),d.src.startsWith("data:"))if(d.complete&&d.naturalWidth>0)console.log(`Image ${x+1} already loaded (base64)`),m();else{const M=()=>{console.log(`Image ${x+1} loaded successfully`),m()},G=()=>{console.warn(`Image ${x+1} failed to load`),m()};d.addEventListener("load",M,{once:!0}),d.addEventListener("error",G,{once:!0}),setTimeout(()=>{d.removeEventListener("load",M),d.removeEventListener("error",G),console.log(`Image ${x+1} load timeout, continuing...`),m()},5e3)}else d.complete?m():(d.onload=m,d.onerror=m)}));await Promise.all(we),console.log("All images processed");const j=t.scrollHeight;let q=v()?1.5:2,J=v()?.8:.9;j>8e3?(q=v()?1.2:1.5,J=v()?.7:.85,c.info("内容较长，正在优化图片质量以确保生成成功...")):j>5e3&&(q=v()?1.3:1.8,J=v()?.75:.87);const oe={useCORS:!0,allowTaint:!0,scale:q,backgroundColor:"#ffffff",logging:!0,width:e,height:j,scrollX:0,scrollY:0,windowWidth:e,windowHeight:j,foreignObjectRendering:!1,imageTimeout:15e3,onclone:d=>{console.log("Document cloned for html2canvas");const x=d.querySelectorAll("img");console.log(`Found ${x.length} images in cloned document`)}};console.log("html2canvas options:",oe),console.log("Container dimensions:",{width:e,height:j}),await new Promise(d=>setTimeout(d,500));const O=await Ue(t,oe);if(console.log("Canvas generated:",{width:O.width,height:O.height}),O.width===0||O.height===0)throw new Error("生成的图片尺寸为0，可能存在渲染问题");document.body.removeChild(t),O.toBlob(d=>{if(d){const x=URL.createObjectURL(d);if(ve()&&(!v()||v()))if(v()){const m=new FileReader;m.onload=function(M){N.value=M.target.result,F.value=!0,c.success("图片已生成，请长按图片保存到相册或转发给朋友")},m.readAsDataURL(d),URL.revokeObjectURL(x)}else N.value=x,F.value=!0,c.success("图片已生成，请长按图片保存到相册或转发给朋友");else{const m=document.createElement("a");m.href=x,m.download=`旅行游记_${n.value.location||"未知地点"}_${new Date().toLocaleDateString()}.jpg`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(x),v()?c.success("图片已下载到微信下载文件夹"):c.success("分享图片已生成并下载")}}else throw new Error("图片生成失败")},"image/jpeg",J)}catch(t){console.error("生成分享图片失败:",t),c.error("生成分享图片失败，请重试")}finally{P.value=!1}};Ce(()=>{});function xe(t){return new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}function he(){return v()||fe(),"保存图片到相册"}return(t,e)=>{var T,S,L;const a=z("el-icon"),i=z("el-option"),f=z("el-select"),r=z("el-input"),y=z("el-col"),p=z("el-date-picker"),b=z("el-row"),k=z("el-button"),$=z("el-dialog");return u(),h(H,null,[o("div",Me,[o("div",Pe,[o("div",Fe,[e[17]||(e[17]=o("div",{style:{flex:"1"}},[o("h1",{class:"gradient-text",style:{"font-size":"24px",margin:"0"}}," ✨ 智能旅行游记生成器 "),o("p",{style:{margin:"8px 0 0 0",color:"#666"}}," 上传您的旅行照片，AI将为您生成精彩的旅行游记 ")],-1)),o("div",{class:"back-button",onClick:e[0]||(e[0]=l=>t.$router.push("/dashboard"))},[o("div",Ne,[s(a,{size:"18"},{default:g(()=>[s(w(Te))]),_:1})]),e[16]||(e[16]=o("span",{class:"back-text"},"返回首页",-1))])])]),o("div",je,[o("div",Oe,[e[24]||(e[24]=o("h2",{style:{margin:"0 0 20px 0",color:"#333"}},"创作设置",-1)),o("div",Be,[e[18]||(e[18]=o("div",{class:"section-title"},"选择AI模型",-1)),s(f,{modelValue:n.value.model,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value.model=l),placeholder:"请选择模型",style:{width:"100%"}},{default:g(()=>[(u(),h(H,null,X(le,l=>s(i,{key:l.value,label:l.label,value:l.value,disabled:l.disabled},null,8,["label","value","disabled"])),64))]),_:1},8,["modelValue"])]),o("div",Ge,[e[20]||(e[20]=o("div",{class:"section-title"},"上传旅行照片",-1)),o("div",{class:Q(["upload-area",{dragover:B.value,compressing:A.value}]),onDrop:de,onDragover:e[2]||(e[2]=Ee(l=>B.value=!0,["prevent"])),onDragleave:e[3]||(e[3]=l=>B.value=!1),onClick:e[4]||(e[4]=l=>!A.value&&ie())},[A.value?(u(),U(a,{key:1,size:"48",style:{color:"#667eea","margin-bottom":"16px"},class:"rotating"},{default:g(()=>[s(w(W))]),_:1})):(u(),U(a,{key:0,size:"48",style:{color:"#999","margin-bottom":"16px"}},{default:g(()=>[s(w($e))]),_:1})),A.value?(u(),h("p",Ye," 正在压缩图片，请稍候... ")):(u(),h("p",He," 点击或拖拽上传图片 ")),e[19]||(e[19]=o("p",{style:{margin:"8px 0 0 0","font-size":"12px",color:"#999"},class:"mobile-text-xs"}," 支持 JPG、PNG、JPEG 格式，最多上传9张 ",-1))],34),o("input",{ref_key:"fileInput",ref:Z,type:"file",multiple:"",accept:"image/*",style:{display:"none"},onChange:re},null,544),_.value.length>0?(u(),h("div",We,[(u(!0),h(H,null,X(_.value,(l,D)=>(u(),h("div",{key:D,class:"image-item"},[o("img",{src:l.preview,alt:`图片${D+1}`},null,8,Ke),o("button",{class:"remove-btn",onClick:K=>ue(D)},"×",8,qe)]))),128))])):R("",!0)]),o("div",Je,[e[21]||(e[21]=o("div",{class:"section-title"},"写作风格",-1)),s(f,{modelValue:n.value.writingStyle,"onUpdate:modelValue":e[5]||(e[5]=l=>n.value.writingStyle=l),placeholder:"请选择写作风格",style:{width:"100%"}},{default:g(()=>[(u(),h(H,null,X(ne,l=>s(i,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),n.value.writingStyle==="自定义"?(u(),U(r,{key:0,modelValue:n.value.customStyle,"onUpdate:modelValue":e[6]||(e[6]=l=>n.value.customStyle=l),type:"textarea",rows:3,placeholder:"请描述您想要的写作风格...",style:{"margin-top":"12px"}},null,8,["modelValue"])):R("",!0)]),o("div",Qe,[e[22]||(e[22]=o("div",{class:"section-title"},"旅行信息",-1)),s(b,{gutter:12},{default:g(()=>[s(y,{xs:24,sm:12},{default:g(()=>[s(r,{modelValue:n.value.location,"onUpdate:modelValue":e[7]||(e[7]=l=>n.value.location=l),placeholder:"地点（如：浙江省杭州市西湖景区）","prefix-icon":"Location"},null,8,["modelValue"])]),_:1}),s(y,{xs:24,sm:12},{default:g(()=>[s(p,{modelValue:n.value.date,"onUpdate:modelValue":e[8]||(e[8]=l=>n.value.date=l),type:"date",placeholder:"选择日期",style:{width:"100%"},format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1}),s(r,{modelValue:n.value.companions,"onUpdate:modelValue":e[9]||(e[9]=l=>n.value.companions=l),placeholder:"同行者（如：家人、朋友、独行）","prefix-icon":"User",style:{"margin-top":"12px"}},null,8,["modelValue"]),s(r,{modelValue:n.value.specialExp,"onUpdate:modelValue":e[10]||(e[10]=l=>n.value.specialExp=l),type:"textarea",rows:2,placeholder:"特色体验（如：品尝西湖醋鱼、游船、看日落）",style:{"margin-top":"12px"}},null,8,["modelValue"]),s(r,{modelValue:n.value.emotionKeywords,"onUpdate:modelValue":e[11]||(e[11]=l=>n.value.emotionKeywords=l),placeholder:"情感关键词（如：悠闲、惊喜、温馨）","prefix-icon":"Star",style:{"margin-top":"12px"}},null,8,["modelValue"]),s(r,{modelValue:n.value.otherInfo,"onUpdate:modelValue":e[12]||(e[12]=l=>n.value.otherInfo=l),type:"textarea",rows:2,placeholder:"其他信息",style:{"margin-top":"12px"}},null,8,["modelValue"])]),o("div",Xe,[o("div",{class:Q(["generate-button",{generating:I.value,disabled:_.value.length===0||(((T=w(V).user)==null?void 0:T.remaining_trials)||0)<=0}]),onClick:pe},[o("div",Ze,[o("div",et,[I.value?(u(),U(a,{key:1,size:"24",class:"rotating"},{default:g(()=>[s(w(W))]),_:1})):(u(),U(a,{key:0,size:"24"},{default:g(()=>[s(w(Se))]),_:1}))]),o("div",tt,[o("span",ot,Y(I.value?"正在生成中...":(((S=w(V).user)==null?void 0:S.remaining_trials)||0)<=0?"体验次数已用完":"生成游记"),1),o("span",at,Y(I.value?"AI正在为您创作精彩游记":(((L=w(V).user)==null?void 0:L.remaining_trials)||0)<=0?"请联系管理员获取更多次数":"点击开始AI创作之旅"),1)])])],2),I.value?(u(),h("div",{key:0,class:"cancel-button",onClick:me},[s(a,{size:"16"},{default:g(()=>[s(w(ze))]),_:1}),e[23]||(e[23]=o("span",null,"取消生成",-1))])):R("",!0)])]),o("div",lt,[o("div",nt,[e[26]||(e[26]=o("h2",{style:{margin:"0",color:"#333"}},"生成结果",-1)),C.value?(u(),h("div",st,[o("div",{class:"action-btn copy",onClick:ge},[s(a,{size:"16"},{default:g(()=>[s(w(Ve))]),_:1}),e[25]||(e[25]=o("span",null,"复制文字",-1))]),o("div",{class:Q(["action-btn share",{generating:P.value}]),onClick:ye},[P.value?(u(),U(a,{key:1,size:"16",class:"rotating"},{default:g(()=>[s(w(W))]),_:1})):(u(),U(a,{key:0,size:"16"},{default:g(()=>[s(w(Ae))]),_:1})),o("span",null,Y(P.value?"生成中...":"分享图片"),1)],2)])):R("",!0)]),o("div",it,[!C.value&&!I.value?(u(),h("div",rt,[s(a,{size:"64"},{default:g(()=>[s(w(Le))]),_:1}),e[27]||(e[27]=o("p",{style:{margin:"20px 0 0 0","font-size":"16px"},class:"mobile-text-sm"}," 上传图片并填写信息后，点击生成按钮开始创作 ",-1))])):R("",!0),I.value?(u(),h("div",dt,[s(a,{size:"64",class:"rotating"},{default:g(()=>[s(w(W))]),_:1}),e[28]||(e[28]=o("p",{style:{margin:"20px 0 0 0",color:"#666"},class:"mobile-text-sm"}," AI正在为您创作游记，请稍候... ",-1))])):R("",!0),C.value?(u(),h("div",ct,[o("div",{class:"result-content",innerHTML:se.value,ref_key:"resultContentRef",ref:ee},null,8,ut)])):R("",!0)])])])]),s($,{modelValue:F.value,"onUpdate:modelValue":e[14]||(e[14]=l=>F.value=l),title:"分享图片",width:"90%",class:"image-preview-dialog",onClose:e[15]||(e[15]=()=>{t.URL.revokeObjectURL(N.value),N.value=""})},{footer:g(()=>[s(k,{onClick:e[13]||(e[13]=l=>F.value=!1),type:"primary"},{default:g(()=>e[31]||(e[31]=[De("知道了")])),_:1,__:[31]})]),default:g(()=>[o("div",pt,[o("img",{src:N.value,alt:"分享图片",class:"preview-image"},null,8,mt),o("div",gt,[e[30]||(e[30]=o("div",{class:"tip-icon"},"💾",-1)),o("div",vt,[o("p",ft,Y(he()),1),v()?(u(),h("div",xt,e[29]||(e[29]=[o("p",{class:"tip-desc"},"• 长按图片，保存图片或转发给朋友",-1)]))):(u(),h("p",yt,'在图片上长按，选择"保存图片"或"存储图像"'))])])])]),_:1},8,["modelValue"])],64)}}},Ct=Re(ht,[["__scopeId","data-v-6f7112e9"]]);export{Ct as default};
